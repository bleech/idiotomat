<html>
  <head>
    <title>idiotom.at</title>
    <link href='http://fonts.googleapis.com/css?family=Julius+Sans+One' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/global.css">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
  </head>
  <body>
    <section class="toolbar">
      <div class="wrapper">
        <div class="logo fll"></div>
        <div class="bleech flr">
          <a href="http://bleech.de" target="_blank"><img src="img/bleech-logo.png" /></a>
        </div>
      </div>
    </section>

    <section class="teaser">
      <div class="wrapper">
        <div class="alert">dein browser wird noch nicht unterstützt. bitte verwende inzwischen chrome.</div>
        <ul class="instructions">
          <li>kopfhörer anschließen</li>
          <li>starten</li>
          <li>zugriff zum mikrofon zulassen</li>
          <li>sprich mit jemandem</li>
        </ul>
      </div>
    </section>

    <section class="advice">
      <div class="wrapper">
        <h1 class="advice">– bekannt aus <a href="http://www.prosieben.de/tv/circus-halligalli/videos/unnoetig-kompliziertes-interview-atze-schroeder-clip" target="_blank">circus halligalli</a> –<br/>für das web von bleech.</h1>

        <button class="start" onclick="startAudio()" type="button">auf geht's</button>
      </div>
    </section>

    <script>

      function hasAudioContext() {
        // Note: Opera builds are unprefixed.
        return !!(window.audioContext || window.webkitAudioContext ||
                  window.mozAudioContext || window.msAudioContext);
      }

      if (hasAudioContext()) {
        var context = new webkitAudioContext();
        var mediaStreamSource;

        var delay = context.createDelay();
        var delayGain = context.createGain();

        delay.delayTime.value = 0.2;
        delay.connect(delayGain);

        delayGain.connect(context.destination);

        function startAudio () {
          navigator.webkitGetUserMedia({audio:true},function(stream) {
            mediaStreamSource = context.createMediaStreamSource(stream);
            mediaStreamSource.connect(delay);
          });

          navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
          window.URL = window.URL || window.webkitURL || window.mozURL || window.msURL;
        }
      } else {
        document.querySelector('.alert').style.display = 'block';
        document.querySelector('.instructions').style.display = 'none';
        document.querySelector('.start').style.display = 'none';
      }

    </script>
  </body>
</html>
