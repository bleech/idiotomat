<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Der Idiotomat - Bekannt aus Circus HalliGalli</title>
    <link href='http://fonts.googleapis.com/css?family=Julius+Sans+One' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/global.css">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="description" content="Kopfhörer anschließen, starten, sprechen!">
    <meta property="og:image" content="http://www.idiotom.at/img/logo.png"/>
    <!--[if lt IE 9]>
    <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <section class="toolbar">
      <div class="wrapper">
        <div class="logo fll"><img src="img/logo.png" /></div>
        <div class="bleech flr">
          <a href="http://bleech.de" target="_blank"><img src="img/bleech-logo.png" /></a>
        </div>
      </div>
    </section>

    <section class="teaser">
      <div class="wrapper">
        <div class="alert">Dein Browser wird noch nicht unterstützt. Bitte verwende <a href="http://google.com/chrome">Chrome</a>.</div>
        <ul class="instructions">
          <li>Kopfhörer anschließen</li>
          <li><button class="start" onclick="toggleAudio()" type="button">Starten</button></li>
          <li>Zugriff zum Mikrofon zulassen</li>
          <li>Sprich mit jemandem</li>
        </ul>
      </div>
    </section>

    <section class="advice">
      <div class="wrapper">
        <h1 class="advice">– Bekannt aus <a href="http://www.prosieben.de/tv/circus-halligalli/videos/unnoetig-kompliziertes-interview-atze-schroeder-clip" target="_blank">Circus HalliGalli</a> –<br/>Für das Web von <a href="http://bleech.de" target="_blank">bleech</a></h1>

        <div class="socials">
          <div class="fb-like" data-href="http://idiotom.at/" data-width="The pixel width of the plugin" data-height="The pixel height of the plugin" data-colorscheme="light" data-layout="button_count" data-action="recommend" data-show-faces="true" data-send="false"></div>

          <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://idiotom.at/" data-lang="de" data-hashtags="idiotomat">Twittern</a>
          <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
        </div>

      </div>
    </section>

    <script>

      if (window.webkitAudioContext && navigator.webkitGetUserMedia) {
        var startButton = document.querySelector('.start');
        var isRunning = false;
        var context = new webkitAudioContext();
        var mediaStreamSource;

        document.querySelector('.alert').style.display = 'none';
        document.querySelector('.instructions').style.display = 'block';

        var delay = context.createDelay();
        var delayGain = context.createGain();

        delay.delayTime.value = 0.2;
        delay.connect(delayGain);

        delayGain.connect(context.destination);

        function toggleAudio () {
          if (isRunning) {
            mediaStreamSource.disconnect();
            startButton.innerHTML = 'Starten';
            isRunning = false;
          } else {
            isRunning = true;
            navigator.webkitGetUserMedia({audio:true},function(stream) {
              mediaStreamSource = context.createMediaStreamSource(stream);
              mediaStreamSource.connect(delay);
              startButton.innerHTML = 'Stoppen';
            });
          }
        }
      }

    </script>

    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/de_DE/all.js#xfbml=1&appId=540780529328065";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>

  </body>
</html>
